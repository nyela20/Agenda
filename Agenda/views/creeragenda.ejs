<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="../../stylesheets/styleFormulaire.css">
    <title><%= title %></title>
</head>
<body>

    <header class="header">
        <ul class="menu">
            <div class="agenda">
                <h1 class="title-header">Agenda</h1>
            </div>
            <div class="compte">
                <li><h2 class="email"><%= userEmailConnected %></h2></li>
                <li>
                    <form action = "/users/compte" method="GET">
                        <button class="button-header" type="submit"> Modifier votre compte </button>
                    </form>
                </li>
                <li>                 
                    <form id="logoutForm" action="/users/logout" method="GET">
                        <button class="button-header" type="submit" id="logoutBtn">Déconnexion</button>
                    </form>
                </li>
            </div>
        </ul>
    </header>

    <div class="container" style="margin-top: 2%;">
    <h1><%= title %></h1>

    <form action="/agenda/creer" method="POST">
        <label for="nom">Nom de l'agenda:</label>
        <input type="text" id="nom" name="nom" required><br><br>

        <label for="description">Description:</label>
        <textarea id="description" name="description" required></textarea><br><br>

        <div style="display: none;">
            <label for="createurEmail">Email du créateur:</label>
            <input type="email" id="createurEmail" name="createurEmail" value="<%= userEmailConnected %>" style="background-color: lightgrey;" readonly required>
        </div>

        <label for="couleur">Choisissez une couleur :</label>
        <select id="couleur" name="couleur" required>
            <option value="">Sélectionnez une couleur</option>
            <option value="0">Rouge</option>
            <option value="1">Bleu</option>
            <option value="2">Vert</option>
            <option value="3">Jaune</option>
            <option value="4">Noir</option>
            <option value="5">Blanc</option>
            <option value="6">Violet</option>
            <option value="7">Orange</option>
        </select>
        <br><br>
        <button type="submit">Ajouter</button>
    </form>
    <br>
    <hr>
    <form action="/agenda/import" method="POST" enctype="multipart/form-data" class="import-form">
        <h1>Importer un agenda existant</h1>
        <input type="file" id="file" name="file" accept=".json" required>
        <br>
        <button type="submit">Importer</button>
    </form>
    <br>
    <button type="button" onclick="window.location.href='/agenda';">Annuler</button>

    <% if (typeof error !== 'undefined' && error) { %>
        <div class="error-popup">
            <span class="close-button" onclick="this.parentElement.style.display='none'">×</span>
            <p><%= error %></p>
        </div>
    <% } %>

</div>

    <div>
        <footer class="footer3">
            <div class="footer-content">
                <p>&copy; 2024 Agenda. Tous droits réservés.</p>
            </div>
        </footer>
    </div>
    
</body>
</html>