<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/stylesheets/style.css">
    <title><%= agenda.nom %> - Agenda</title>
    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.js"></script>
</head>
<body>

<%
    let semaineNumber = Number(req.query.semaine) ? Number(req.query.semaine) : new Date().getWeek();
    let mois = new Date().getMonthFromWeek(semaineNumber);
%>
<header class="fixed bg-white w-full flex justify-center border-b border-primary">
    <div class="max-w-7xl w-full flex items-center justify-between h-[72px]">
        <div>
            <a href="/agenda"><h1 class="text-xl font-semibold">Agenda</h1></a>
        </div>
        <div class="flex items-center gap-3">
            <button data-dropdown-toggle="notifications-dropdown"
                    class="py-2.5 px-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9.35419 21C10.0593 21.6224 10.9856 22 12 22C13.0145 22 13.9407 21.6224 14.6458 21M18 8C18 6.4087 17.3679 4.88258 16.2427 3.75736C15.1174 2.63214 13.5913 2 12 2C10.4087 2 8.8826 2.63214 7.75738 3.75736C6.63216 4.88258 6.00002 6.4087 6.00002 8C6.00002 11.0902 5.22049 13.206 4.34968 14.6054C3.61515 15.7859 3.24788 16.3761 3.26134 16.5408C3.27626 16.7231 3.31488 16.7926 3.46179 16.9016C3.59448 17 4.19261 17 5.38887 17H18.6112C19.8074 17 20.4056 17 20.5382 16.9016C20.6852 16.7926 20.7238 16.7231 20.7387 16.5408C20.7522 16.3761 20.3849 15.7859 19.6504 14.6054C18.7795 13.206 18 11.0902 18 8Z"
                          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <div id="notifications-dropdown"
                 class="z-10 hidden bg-white rounded-lg shadow max-w-xl w-full dark:bg-gray-700 px-8 py-6">
                <ol class="relative border-s border-gray-200 dark:border-gray-700 space-y-10">
                    <% if (notifications.length > 0) { %>
                        <% notifications.reverse().slice(0, 5).forEach(notification => { %>
                            <li class="ms-6">
                        <span class="absolute flex items-center justify-center w-6 h-6 bg-blue-100 rounded-full -start-3 ring-8 ring-white dark:ring-gray-900 dark:bg-blue-900">
                            <div class="rounded-full h-6 w-6 bg-gray-50 flex items-center justify-center">N</div>
                        </span>
                                <div class="items-center justify-between p-4 bg-white border border-gray-200 rounded-lg shadow-sm sm:flex dark:bg-gray-700 dark:border-gray-600">
                                    <!--                                <time class="mb-1 text-xs font-normal text-gray-400 sm:order-last sm:mb-0"><%                  %></time>-->
                                    <time class="mb-1 text-xs font-normal text-gray-400 sm:order-last sm:mb-0 time-elapsed"
                                          data-timestamp="<%= notification.createdAt %>"></time>
                                    <div class="text-sm font-normal text-gray-500 dark:text-gray-300">
                                        <%= notification.message %>
                                    </div>
                                </div>
                            </li>
                        <% }) %>
                    <% } else { %>
                        <li class="text-center text-gray-400 dark:text-gray-300">Aucune notification</li>
                    <% } %>
                </ol>
            </div>
            <div>
                <div class="rounded-full cursor-pointer h-10 w-10 flex items-center justify-center p-1 bg-gray-50"
                     data-dropdown-toggle="dropdown">
                    <%= userNameConnected.split(' ').map((value) => value.slice()[0]) %>
                </div>
                <div id="dropdown"
                     class="z-10 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700">
                    <ul class="py-2 text-sm text-gray-700 dark:text-gray-200" aria-labelledby="dropdownDefaultButton">
                        <li>
                            <a href="/users/compte"
                               class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">Paramètres</a>
                        </li>
                        <li>
                            <a href="/users/logout"
                               class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">Se
                                déconnecter</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</header>

<main class="pt-32 max-w-7xl w-full mx-auto">
    <div class="w-full flex justify-between pb-8 border-b">
        <div class="space-y-1">
            <h1 class="font-semibold text-3xl text-primary"><%= agenda.nom %></h1>
            <p class="text-secondary"><%= agenda.description %></p>
            <p class="text-tertiary"><%= agenda.createurEmail %></p>
        </div>
        <div class="text-center flex items-center gap-2">
            <button class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
                    type="button" data-drawer-target="new-rendezvous-drawer" data-drawer-show="new-rendezvous-drawer"
                    data-drawer-placement="right" aria-controls="drawer-right-example">
                Ajouter un rendez-vous
            </button>
            <button class="h-fit py-2.5 px-5 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"
                    type="button" data-drawer-target="drawer-right-example" data-drawer-show="drawer-right-example"
                    data-drawer-placement="right" aria-controls="drawer-right-example">
                Filtres
            </button>
        </div>
    </div>

    <div id="new-rendezvous-drawer" class="fixed top-0 right-0 z-40 h-screen p-6 overflow-y-auto transition-transform translate-x-full bg-white max-w-lg w-full dark:bg-gray-800" tabindex="-1" aria-labelledby="drawer-right-label">
        <h5 id="drawer-right-label" class="inline-flex items-center mb-4 text-xl font-semibold text-primary">Ajouter un rendez-vous</h5>
        <button type="button" data-drawer-hide="new-rendezvous-drawer" aria-controls="new-rendezvous-drawer" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 absolute top-2.5 end-2.5 inline-flex items-center justify-center dark:hover:bg-gray-600 dark:hover:text-white" >
            <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
            </svg>
            <span class="sr-only">Close menu</span>
        </button>
    </div>

    <div id="drawer-right-example"
         class="fixed top-0 right-0 z-40 h-screen p-6 overflow-y-auto transition-transform translate-x-full bg-white max-w-lg w-full dark:bg-gray-800"
         tabindex="-1" aria-labelledby="drawer-right-label">
        <h5 id="drawer-right-label"
            class="inline-flex items-center mb-4 text-base font-semibold text-gray-500 dark:text-gray-400">Filtres</h5>
        <button type="button" data-drawer-hide="drawer-right-example" aria-controls="drawer-right-example"
                class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 absolute top-6 end-6 inline-flex items-center justify-center dark:hover:bg-gray-600 dark:hover:text-white">
            <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
            </svg>
            <span class="sr-only">Close menu</span>
        </button>
        <div>
            <form id="agendafiltreForm" method="GET" action="/rendezvous/<%= agenda.id %>" class="space-y-3">
                <!-- Ne pas changer la date si on soumet ce formulaire -->
                <input type="hidden" name="semaine" value="<%= semaine %>"/>
                <input type="hidden" name="moisParametre" value="<%= moisParametre %>"/>
                <input type="hidden" name="anneeParametre" value="<%= anneeParametre %>"/>
                <% agendas.forEach(agendaElement => { if(!(agendaElement.id == agenda.id)){ %>
                    <input type="checkbox" style="display: none;" value="<%= agendaElement.id %>"
                           name="<%= agendaElement.nom %>"
                    <% if(req.query[agendaElement.nom]){ %> checked
                            <% } %>
                    >
                <% }}); %>
                <div class="flex flex-col gap-1.5">
                    <label class="text-tertiary text-sm font-medium " for="nomFiltre"> Nom : </label>
                    <input class="w-full px-3.5 py-2.5 rounded-lg border border-primary placeholder-primary" type="text"
                           id="nomFiltre" name="nomFiltre" value="<%= nomFiltre %>">
                </div>
                <div class="flex flex-col gap-1.5">
                    <label class="text-tertiary text-sm font-medium" for="emailFiltre"> Créateur : </label>
                    <input class="w-full px-3.5 py-2.5 rounded-lg border border-primary placeholder-primary" type="text"
                           id="emailFiltre" name="emailFiltre" value="<%= emailFiltre %>">
                </div>
                <button type="submit"> Appliquer</button>
            </form>

            <form id="checkboxForm" method="GET" action="/rendezvous/<%= agenda.id %>">
                <!-- Ne pas changer la date si on soumet ce formulaire -->
                <input type="hidden" name="semaine" value="<%= semaine %>"/>
                <input type="hidden" name="moisParametre" value="<%= moisParametre %>"/>
                <input type="hidden" name="anneeParametre" value="<%= anneeParametre %>"/>
                <h4> Mes agendas </h4>
                <div class="mes-agendas">
                    <%
                    // Parcours la liste des agendas dans la bdd
                    agendas.forEach(agendaElement => {
                    if(!(agendaElement.id == agenda.id)){ %>
                        <input type="checkbox" class="checkbox-couleur-<%= agendaElement.couleur %>"
                               value="<%= agendaElement.id %>" id="<%= agendaElement.nom %>"
                               name="<%= agendaElement.nom %>"
                        <% if(req.query[agendaElement.nom]){ %> checked
                                <% } %>
                        >
                        <label for="<%= agendaElement.nom %>"><%= agendaElement.nom %></label>
                        <br>
                    <% }
                    });
                    %>
                </div>
                <h4> Agendas partagés avec moi </h4>
                <div class="mes-agendas">
                    <%
                    agendasPartages.forEach(agendaElement => {
                    if(!(agendaElement.id == agenda.id)){ %>
                        <input type="checkbox" class="checkbox-couleur-<%= agendaElement.couleur %>"
                               value="<%= agendaElement.id %>" id="<%= agendaElement.nom %>"
                               name="<%= agendaElement.nom %>"
                        <% if(req.query[agendaElement.nom]){ %> checked
                                <% } %>
                        >
                        <label for="<%= agendaElement.nom %>"><%= agendaElement.nom %></label>
                        <br>
                    <% }
                    });
                    %>
                </div>
                <br>
                <% if(nomFiltre) { %>
                    <input type="hidden" name="nomFiltre" value="<%= nomFiltre %>">
                <% } %>
                <% if(emailFiltre) { %>
                    <input type="hidden" name="emailFiltre" value="<%= emailFiltre %>">
                <% } %>
                <button type="submit"> Mettre à jour affichage</button>
            </form>

            <form id="chooseWeekDate" method="GET" action="/rendezvous/<%= agenda.id %>">
                <input class="w-full px-3.5 py-2.5 rounded-lg border border-primary placeholder-primary"
                       type="week" name="weekDate" id="chooseWeekDateInput" required>
            </form>
        </div>
    </div>
    <div class="mt-6">
        <div>
            <div>
                <div class="flex items-center justify-between">
                    <h1 class="text-primary text-xl font-semibold"><%= String(mois).charAt(0).toUpperCase() + String(mois).slice(1) + " " + date.getFullYear() %></h1>
                    <div class="flex items-center gap-2">
                        <div class="flex items-center gap-2 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200  focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700">
                            <a href="/rendezvous/<%= agenda.id %>?semaine=<%= semaineNumber - 1 %>" class="hover:bg-gray-100 hover:text-blue-700 px-2.5 py-2.5 flex items-center justify-center">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2"
                                          stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </a>
                            <button class="hover:bg-gray-100 hover:text-blue-700 px-1 py-2.5 flex items-center justify-center">
                                <span class="block">Semaine <%= semaineNumber %></span>
                            </button>
                            <a href="/rendezvous/<%= agenda.id %>?semaine=<%= semaineNumber + 1 %>" class="hover:bg-gray-100 hover:text-blue-700 px-2.5 py-2.5">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2"
                                          stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </a>
                        </div>
                        <button id="dropdownDefaultButton" data-dropdown-toggle="views-dropdown"
                                class="flex items-center gap-1 py-2.5 px-5 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"
                                type="button">
                            Vue
                            <svg class="w-2.5 h-2.5 ms-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                                 fill="none" viewBox="0 0 10 6">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                      stroke-width="2" d="m1 1 4 4 4-4"/>
                            </svg>
                        </button>
                        <div id="views-dropdown"
                             class="z-10 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700">
                            <ul class="py-2 text-sm text-gray-700 dark:text-gray-200"
                                aria-labelledby="dropdownDefaultButton">
                                <li>
                                    <a href="#"
                                       class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">Hebdomadaire</a>
                                </li>
                                <li>
                                    <a href="#"
                                       class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">Mensuel</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <br>
                <!--<div class="flex">
                    <%
                let semainePrecedente;
                let moisPrecedent = moisParametre;
                let anneePrecedent = anneeParametre;
                if (semaine > 1) {
                    semainePrecedente = semaine - 1;
                } else {
                    semainePrecedente = 5;
                    moisPrecedent = moisParametre - 1;
                    if (moisPrecedent < 0) {
                        moisPrecedent = 11;
                        anneePrecedent = anneeParametre - 1;
                    }
                }
                %>
                    <form id="semainePrecedente" method="GET" action="/rendezvous/<%= agenda.id %>">
                        <input type="hidden" name="semaine" value="<%= semainePrecedente %>"/>
                        <input type="hidden" name="moisParametre" value="<%= moisPrecedent %>"/>
                        <input type="hidden" name="anneeParametre" value="<%= anneePrecedent %>"/>
                        &lt;!&ndash; pour permettre de faire le lien entre form semaine et form checkbox des agenda et form recherche/filtre &ndash;&gt;
                        <% agendas.forEach(agendaElement => { if(!(agendaElement.id == agenda.id)){ %>
                            <input type="checkbox" style="display: none;" value="<%= agendaElement.id %>"
                                   name="<%= agendaElement.nom %>"
                            <% if(req.query[agendaElement.nom]){ %> checked
                                    <% } %>
                            >
                        <% }}); %>
                        <% if(nomFiltre) { %>
                            <input type="hidden" name="nomFiltre" value="<%= nomFiltre %>">
                        <% } %>
                        <% if(emailFiltre) { %>
                            <input type="hidden" name="emailFiltre" value="<%= emailFiltre %>">
                        <% } %>
                        <button class="py-2.5 px-5 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700" type="submit">Semaine Précédente</button>
                    </form>
                    <form id="jour" method="GET" action="/rendezvous/<%= agenda.id %>/jour">
                        <input type="hidden" name="jourParametre2" value="<%= caseDepart %>"/>
                        <button class="py-2.5 px-5 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700" type="submit">Vue Journalière</button>
                    </form>
                    <form id="mois" method="GET" action="/rendezvous/<%= agenda.id %>/mois">
                        <input type="hidden" name="jourParametre2" value="<%= caseDepart %>"/>
                        <button class="py-2.5 px-5 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700" type="submit">Vue Mensuelle</button>
                    </form>
                    <% let semaineSuivante;
                let moisSuivant = moisParametre;
                let anneeSuivant = anneeParametre;
                if (semaine < 5) {
                    semaineSuivante = semaine + 1;
                } else {
                    semaineSuivante = 1;
                    moisSuivant = moisParametre + 1;
                    if (moisSuivant > 11) {
                        moisSuivant = 0;
                        anneeSuivant = anneeParametre + 1;
                    }
                } %>
                    <form id="semaineSuivante" method="GET" action="/rendezvous/<%= agenda.id %>">
                        <input type="hidden" name="semaine" value="<%= semaineSuivante %>"/>
                        <input type="hidden" name="moisParametre" value="<%= moisSuivant %>"/>
                        <input type="hidden" name="anneeParametre" value="<%= anneeSuivant %>"/>
                        <% agendas.forEach(agendaElement => { if(!(agendaElement.id == agenda.id)){ %>
                            <input type="checkbox" style="display: none;" value="<%= agendaElement.id %>"
                                   name="<%= agendaElement.nom %>"
                            <% if(req.query[agendaElement.nom]){ %> checked
                                    <% } %>
                            >
                        <% }}); %>
                        <% if(nomFiltre) { %>
                            <input type="hidden" name="nomFiltre" value="<%= nomFiltre %>">
                        <% } %>
                        <% if(emailFiltre) { %>
                            <input type="hidden" name="emailFiltre" value="<%= emailFiltre %>">
                        <% } %>
                        <button class="py-2.5 px-5 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700" type="submit">Semaine Suivante</button>
                    </form>
                </div>-->
            </div>
            <!--<div class="relative grid grid-cols-7 divide-y divide-y-reverse divide-x divide-x-reverse overflow-y-auto max-h-[624px]">
                &lt;!&ndash; Les horaires de 00h à 23h &ndash;&gt;
                &lt;!&ndash;<%
            for (let hour = 0; hour < 24; hour++) {
            %>
                    <div class="hour-label"><%= (hour) + "h" %></div>
                    <%
                const premierJourAffichage = (semaine - 1) * 7 - caseDepart;
            for (let i = 0; i < 7; i++) {
                const jour = premierJourAffichage + i;
            %>
                    <% if (jour >= 0 && jour < nombreJours) { %>
                        <div class="day-cell"> <%= (hour == 0) ? jour + 1 : "" %>
                            <%
                // Parcours la liste des rendez-vous et affiche leurs attributs
            rendezVousList.forEach(rendezvous => {
            %>

                                <% if(jour + 1 == rendezvous.dateRendezVous.getDate()){
            if(hour == rendezvous.dateRendezVous.getHours()){ %>
                                    <% let tailleRdvCell = -105 * (rendezvous.duree.heures - 1) %>
                                    <% let margeminutes = Math.floor((rendezvous.dateRendezVous.getMinutes() * 100) / 60) %>
                                    <% let dureeMinutes = Math.floor((rendezvous.duree.minutes * 100) / 60) %>
                                    <div style="cursor: pointer; margin-bottom:<%= (tailleRdvCell - dureeMinutes) %>px; top: <%= margeminutes %>px"
                                         class="rendez-vous-cell<%= rendezvous.couleur %> <%= rendezvous.estRecurrent ? 'recurring' : '' %>"
                                         onclick="window.location.href='/rendezvous/<%= agenda.id %>/informations/<%= rendezvous.id %>'">
                                        <div class="nom-rendez-vous">
                                            <%= "Nom :" + rendezvous.nom %>
                                        </div>
                                        <%= "Heure :" + rendezvous.dateRendezVous.getHours() + "h" + rendezvous.dateRendezVous.getMinutes() + "min" %>
                                        <br>
                                        <%= "Durée :" + rendezvous.duree.heures + "h" + rendezvous.duree.minutes + "min" %>
                                        <% if(rendezvous.estRecurrent) { %>
                                            <br>
                                            <span class="recurrence-info">
                                                                    <%= rendezvous.typeRecurrence === 'quotidien' ? '(Quotidien)' :
                    rendezvous.typeRecurrence === 'semaine' ? '(Hebdomadaire)' :
                            rendezvous.typeRecurrence === 'mensuel' ? '(Mensuel)' : '' %>
                                                                </span>
                                        <% } %>
                                    </div>
                                <% }
            } %>
                            <%
            });
            %>
                        </div>
                    <% } else { %>
                        <div class="day-cell-hidden"></div>
                    <% } %>
                    <%
            }
            %>
                <%
            }
            %>&ndash;&gt;

                <% for (let day = 0; day < 7; day++) { %> &lt;!&ndash; 7 jours &ndash;&gt;
                    <% for (let hour = 0; hour < 24; hour++) { %> &lt;!&ndash; 24 heures &ndash;&gt;
                        <div class="h-[56px]">
                            test
                        </div>
                    <% } %>
                <% } %>


            </div>-->
            <section class="relative mb-8 border border-primary rounded-lg">
                <div class="w-full max-w-7xl mx-auto overflow-x-auto">
                    <div class="relative">
                        <div class="grid grid-cols-8 border-b border-primary sticky top-0 left-0 w-full">
                            <div class="p-3.5 flex items-center justify-center text-sm font-medium  text-gray-900"></div>

                            <% new Date().getDaysOfWeek(semaineNumber ?? new Date().getWeek()).forEach(day => {%>
                                <div class="p-3.5 flex items-center justify-center text-sm font-medium text-gray-900">
                                    <%= day.getDayOfWeek() + ' ' + day.getDate() %>
                                </div>
                            <%})%>

                            <!--<div class="p-3.5 flex items-center justify-center text-sm font-medium  text-gray-900">
                                Mardi
                            </div>
                            <div class="p-3.5 flex items-center justify-center text-sm font-medium  text-gray-900">
                                Mercredi
                            </div>
                            <div class="p-3.5 flex items-center justify-center text-sm font-medium  text-gray-900">
                                Jeudi
                            </div>
                            <div class="p-3.5 flex items-center justify-center text-sm font-medium  text-gray-900">
                                Vendredi
                            </div>
                            <div class="p-3.5 flex items-center justify-center text-sm font-medium  text-gray-900">
                                Samedi
                            </div>
                            <div class="p-3.5 flex items-center justify-center text-sm font-medium  text-gray-900">
                                Dimanche
                            </div>-->
                        </div>
                        <div class="hidden grid-cols-8 sm:grid w-full overflow-x-auto max-h-[650px] h-full overflow-y-auto">
                            <% for(let hour = 0; hour < 24; hour++) { %>
                                <div class="h-32 lg:h-28 p-0.5 md:p-3.5  border-t border-r border-gray-200 flex items-end transition-all hover:bg-stone-100">
                                    <span class="text-xs font-semibold text-gray-400"><%= hour %>:00</span>
                                </div>
                                <div class="h-32 lg:h-28 p-0.5 md:p-3.5  border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                                <div class="h-32 lg:h-28 p-0.5 md:p-3.5  border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                                <div class="h-32 lg:h-28 p-0.5 md:p-3.5  border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                                <div class="h-32 lg:h-28 p-0.5 md:p-3.5  border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                                <div class="h-32 lg:h-28 p-0.5 md:p-3.5  border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                                <div class="h-32 lg:h-28 p-0.5 md:p-3.5  border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                                <div class="h-32 lg:h-28 p-0.5 md:p-3.5  border-t border-gray-200 transition-all hover:bg-stone-100"></div>
                            <% } %>

                            <!--<div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 flex items-end transition-all hover:bg-stone-100">
                                <span class="text-xs font-semibold text-gray-400">08:00</span>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 flex items-end transition-all hover:bg-stone-100">
                                <div class="rounded p-1.5 border-l-2 border-blue-600 bg-blue-50">
                                    <p class="text-xs font-normal text-gray-900 mb-px">Project Task Review</p>
                                    <p class="text-xs font-semibold text-blue-600">08:00 - 08:25</p>
                                </div>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-gray-200 transition-all hover:bg-stone-100"></div>

                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 flex items-end transition-all hover:bg-stone-100">
                                <span class="text-xs font-semibold text-gray-400">09:00</span>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100">
                                <div class="rounded p-1.5 border-l-2 border-yellow-600 bg-yellow-50">
                                    <p class="text-xs font-normal text-gray-900 mb-px">Breakfast with Dhruv Patel</p>
                                    <p class="text-xs font-semibold text-yellow-600">08:00 - 09:00</p>
                                </div>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-gray-200 transition-all hover:bg-stone-100"></div>

                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 flex items-end transition-all hover:bg-stone-100">
                                <span class="text-xs font-semibold text-gray-400">10:00</span>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100">
                                <div class="rounded p-1.5 border-l-2 border-green-600 bg-green-50">
                                    <p class="text-xs font-normal text-gray-900 mb-px">Dancing Zumba class</p>
                                    <p class="text-xs font-semibold text-green-600">09:30 - 10:00</p>
                                </div>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-gray-200 transition-all hover:bg-stone-100">
                                <div class="rounded p-1.5 border-l-2 border-purple-600 bg-purple-50">
                                    <p class="text-xs font-normal text-gray-900 mb-px">Doctor’s Appointment for Mother</p>
                                    <p class="text-xs font-semibold text-purple-600">09:00 - 10:45</p>
                                </div>
                            </div>

                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 flex items-end transition-all hover:bg-stone-100">
                                <span class="text-xs font-semibold text-gray-400">11:00</span>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100">
                                <div class="rounded p-1.5 border-l-2 border-blue-600 bg-blue-50">
                                    <p class="text-xs font-normal text-gray-900 mb-px">Daily Standup Meeting</p>
                                    <p class="text-xs font-semibold text-blue-600">10:00 - 11:00</p>
                                </div>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100">
                                <div class="rounded p-1.5 border-l-2 border-yellow-600 bg-yellow-50">
                                    <p class="text-xs font-normal text-gray-900 mb-px">School Friend’s Birthday Party</p>
                                    <p class="text-xs font-semibold text-yellow-600">10:00 - 11:45</p>
                                </div>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-gray-200 transition-all hover:bg-stone-100"></div>

                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 flex items-end transition-all hover:bg-stone-100">
                                <span class="text-xs font-semibold text-gray-400">12:00</span>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100">
                                <div class="rounded p-1.5 border-l-2 border-blue-600 bg-blue-50">
                                    <p class="text-xs font-normal text-gray-900 mb-px">Meeting with Project Manager </p>
                                    <p class="text-xs font-semibold text-blue-600">11:00 - 12:30</p>
                                </div>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-gray-200 transition-all hover:bg-stone-100"></div>

                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 flex items-end transition-all hover:bg-stone-100">
                                <span class="text-xs font-semibold text-gray-400">13:00</span>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100">
                                <div class="rounded p-1.5 border-l-2 border-blue-600 bg-blue-50">
                                    <p class="text-xs font-normal text-gray-900 mb-px">Meeting with Project Manager </p>
                                    <p class="text-xs font-semibold text-blue-600">11:00 - 12:30</p>
                                </div>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-gray-200 transition-all hover:bg-stone-100"></div>

                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 flex items-end transition-all hover:bg-stone-100">
                                <span class="text-xs font-semibold text-gray-400">14:00</span>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100">
                                <div class="rounded p-1.5 border-l-2 border-blue-600 bg-blue-50">
                                    <p class="text-xs font-normal text-gray-900 mb-px">Meeting with Project Manager </p>
                                    <p class="text-xs font-semibold text-blue-600">11:00 - 12:30</p>
                                </div>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-gray-200 transition-all hover:bg-stone-100"></div>

                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 flex items-end transition-all hover:bg-stone-100">
                                <span class="text-xs font-semibold text-gray-400">15:00</span>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100">
                                <div class="rounded p-1.5 border-l-2 border-blue-600 bg-blue-50">
                                    <p class="text-xs font-normal text-gray-900 mb-px">Meeting with Project Manager </p>
                                    <p class="text-xs font-semibold text-blue-600">11:00 - 12:30</p>
                                </div>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-gray-200 transition-all hover:bg-stone-100"></div>

                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 flex items-end transition-all hover:bg-stone-100">
                                <span class="text-xs font-semibold text-gray-400">16:00</span>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100">
                                <div class="rounded p-1.5 border-l-2 border-blue-600 bg-blue-50">
                                    <p class="text-xs font-normal text-gray-900 mb-px">Meeting with Project Manager </p>
                                    <p class="text-xs font-semibold text-blue-600">11:00 - 12:30</p>
                                </div>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-gray-200 transition-all hover:bg-stone-100"></div>

                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 flex items-end transition-all hover:bg-stone-100">
                                <span class="text-xs font-semibold text-gray-400">17:00</span>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100">
                                <div class="rounded p-1.5 border-l-2 border-blue-600 bg-blue-50">
                                    <p class="text-xs font-normal text-gray-900 mb-px">Meeting with Project Manager </p>
                                    <p class="text-xs font-semibold text-blue-600">11:00 - 12:30</p>
                                </div>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-gray-200 transition-all hover:bg-stone-100"></div>

                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 flex items-end transition-all hover:bg-stone-100">
                                <span class="text-xs font-semibold text-gray-400">18:00</span>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100">
                                <div class="rounded p-1.5 border-l-2 border-blue-600 bg-blue-50">
                                    <p class="text-xs font-normal text-gray-900 mb-px">Meeting with Project Manager </p>
                                    <p class="text-xs font-semibold text-blue-600">11:00 - 12:30</p>
                                </div>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-gray-200 transition-all hover:bg-stone-100"></div>

                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 flex items-end transition-all hover:bg-stone-100">
                                <span class="text-xs font-semibold text-gray-400">19:00</span>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100">
                                <div class="rounded p-1.5 border-l-2 border-blue-600 bg-blue-50">
                                    <p class="text-xs font-normal text-gray-900 mb-px">Meeting with Project Manager </p>
                                    <p class="text-xs font-semibold text-blue-600">11:00 - 12:30</p>
                                </div>
                            </div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-r border-gray-200 transition-all hover:bg-stone-100"></div>
                            <div class="h-32 lg:h-28 p-0.5 md:p-3.5   border-t border-gray-200 transition-all hover:bg-stone-100"></div>-->
                        </div>
                        <div class="flex sm:hidden border-t border-gray-200 items-center w-full">
                            <div class="flex flex-col">
                                <div class="w-20 h-20 p-2 flex items-end text-xs font-semibold text-gray-400 border-b border-r border-gray-200">
                                    07:00 am
                                </div>
                                <div class="w-20 h-20 p-2 flex items-end text-xs font-semibold text-gray-400 border-b border-r border-gray-200">
                                    08:00 am
                                </div>
                                <div class="w-20 h-20 p-2 flex items-end text-xs font-semibold text-gray-400 border-b border-r border-gray-200">
                                    09:00 am
                                </div>
                                <div class="w-20 h-20 p-2 flex items-end text-xs font-semibold text-gray-400 border-b border-r border-gray-200">
                                    10:00 am
                                </div>
                                <div class="w-20 h-20 p-2 flex items-end text-xs font-semibold text-gray-400 border-b border-r border-gray-200">
                                    11:00 am
                                </div>
                                <div class="w-20 h-20 p-2 flex items-end text-xs font-semibold text-gray-400 border-b border-r border-gray-200">
                                    12:00 pm
                                </div>
                                <div class="w-20 h-20 p-2 flex items-end text-xs font-semibold text-gray-400 border-b border-r border-gray-200">
                                    07:00 am
                                </div>
                                <div class="w-20 h-20 p-2 flex items-end text-xs font-semibold text-gray-400 border-b border-r border-gray-200">
                                    08:00 am
                                </div>
                                <div class="w-20 h-20 p-2 flex items-end text-xs font-semibold text-gray-400 border-b border-r border-gray-200">
                                    09:00 am
                                </div>
                                <div class="w-20 h-20 p-2 flex items-end text-xs font-semibold text-gray-400 border-b border-r border-gray-200">
                                    10:00 am
                                </div>
                                <div class="w-20 h-20 p-2 flex items-end text-xs font-semibold text-gray-400 border-b border-r border-gray-200">
                                    11:00 am
                                </div>
                                <div class="w-20 h-20 p-2 flex items-end text-xs font-semibold text-gray-400 border-b border-r border-gray-200">
                                    12:00 pm
                                </div>
                            </div>
                            <div class="grid grid-cols-1 w-full">
                                <div class="w-full h-20 border-b border-gray-200 p-1.5">
                                    <div class="w-full h-full rounded p-1.5 border-l-2 border-purple-600 bg-purple-50">
                                        <p class="text-xs font-normal text-gray-900 mb-px">Pickup the grandmother</p>
                                        <p class="text-xs font-semibold text-purple-600">06:00 - 07:30</p>
                                    </div>
                                </div>
                                <div class="w-full h-20 border-b border-gray-200 p-1.5"></div>
                                <div class="w-full h-20 border-b border-gray-200 p-1.5"></div>
                                <div class="w-full h-20 border-b border-gray-200 p-1.5"></div>
                                <div class="w-full h-20 border-b border-gray-200 p-1.5"></div>
                                <div class="w-full h-20 border-b border-gray-200 p-1.5">
                                    <div class="w-full h-full rounded p-1.5 border-l-2 border-blue-600 bg-blue-50">
                                        <p class="text-xs font-normal text-gray-900 mb-px">Meeting with Project
                                            Manager </p>
                                        <p class="text-xs font-semibold text-blue-600">11:00 - 12:30</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
</main>

</body>
</html>
